{"version":3,"sources":["webpack:///webpack/bootstrap 2286e2254e9786bc87e1","webpack:///./src/crosstalk.js","webpack:///./src/polyfills/broadcastchannel.js"],"names":[],"mappings":"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","file":"crosstalk.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2286e2254e9786bc87e1\n **/","require('./polyfills/broadcastchannel.js');\n\nvar CrossTalk = function (object, channel, handler) {\n  'use strict';\n\n  if (object === undefined || object === '') {\n    let err = new Error('channel required (at minimum)');\n    console.error(err);\n    return;\n  }\n\n  // Variadic check\n  if (typeof object === 'string') {\n    handler = channel;\n    channel = object;\n    object = {};\n  }\n\n  var self = this;\n\n  // Create new broadcast channel\n  let bc = new BroadcastChannel(channel);\n\n  // Set object properties so it can't change\n  Object.defineProperties(self, {\n    _broadcastChannel: {\n      writable: false,\n      enumerable: false,\n      configurable: false,\n      value: bc\n    },\n    _handler: {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: handler || function () {}\n    },\n    _data: {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: object\n    },\n    _instance: {\n      writable: true,\n      enumerable: false,\n      configurable: false,\n      value: 0\n    }\n  });\n\n  // Message handler\n  self._broadcastChannel.onmessage = (message) => {\n    switch (message.data.type) {\n    case 'requestSync':\n      self._broadcastChannel.postMessage({\n        type: 'pushSync',\n        data: self._data\n      });\n      break;\n    case 'pushSync':\n      self._data = message.data.data;\n      self._handler(self._data);\n      break;\n    case 'requestInit':\n      self._broadcastChannel.postMessage({\n        type: 'pushInit',\n        data: {\n          data: self._data,\n          instance: self._instance + 1\n        }\n      });\n      break;\n    case 'pushInit':\n      self._instance = Math.max(self._instance, message.data.data.instance);\n      self._data = message.data.data.data;\n      self._handler(self._data);\n      break;\n    default:\n      break;\n    }\n  };\n\n  // Sync with other window(s).\n  self._broadcastChannel.postMessage({\n    type: 'requestInit'\n  });\n\n  return self;\n};\n\nCrossTalk.prototype.set = function (attr, value) {\n  if (typeof attr === 'string') {\n    this._data[attr] = value;\n    this.sync(this._data);\n    this._handler(this.data);\n    return this._data[attr];\n  } else if (typeof attr === 'object') {\n    this._data = attr;\n    this.sync(this._data);\n    this._handler(this.data);\n    return this._data;\n  }\n};\n\nCrossTalk.prototype.get = function (attr) {\n  if (typeof attr === 'string') {\n    return this._data[attr];\n  } else {\n    return this._data;\n  }\n};\n\nCrossTalk.prototype.sync = function (data) {\n  if (data === undefined) {\n    this._broadcastChannel.postMessage({\n      type: 'requestSync'\n    });\n  } else {\n    this._broadcastChannel.postMessage({\n      type: 'pushSync',\n      data: this._data\n    });\n  }\n};\n\nCrossTalk.prototype.getInstance = function () {\n  return this._instance;\n};\n\nCrossTalk.prototype.getChannel = function () {\n  return this._broadcastChannel._name;\n};\n\nwindow.CrossTalk = CrossTalk;\n\n\n/** WEBPACK FOOTER **\n ** ./src/crosstalk.js\n **/","/* BroadcastChannel\n * \n * Credit to inexorabletash on github\n * https://gist.github.com/inexorabletash/52f437d1451d12145264\n *\n * Thanks!\n */\n\n(function (global) {\n  var channels = [];\n\n  function BroadcastChannel(channel) {\n    var $this = this;\n    channel = String(channel);\n\n    var id = '$BroadcastChannel$' + channel + '$';\n\n    channels[id] = channels[id] || [];\n    channels[id].push(this);\n\n    this._name = channel;\n    this._id = id;\n    this._closed = false;\n    this._mc = new MessageChannel();\n    this._mc.port1.start();\n    this._mc.port2.start();\n\n    global.addEventListener('storage', function (e) {\n      if (e.storageArea !== global.localStorage) return;\n      if (e.newValue === null) return;\n      if (e.key.substring(0, id.length) !== id) return;\n      var data = JSON.parse(e.newValue);\n      $this._mc.port2.postMessage(data);\n    });\n  }\n\n  BroadcastChannel.prototype = {\n    // BroadcastChannel API\n    get name() {\n      return this._name;\n    },\n    postMessage: function (message) {\n      var $this = this;\n      if (this._closed) {\n        var e = new Error();\n        e.name = 'InvalidStateError';\n        throw e;\n      }\n      var value = JSON.stringify(message);\n\n      // Broadcast to other contexts via storage events...\n      var key = this._id + String(Date.now()) + '$' + String(Math.random());\n      global.localStorage.setItem(key, value);\n      setTimeout(function () {\n        global.localStorage.removeItem(key);\n      }, 500);\n\n      // Broadcast to current context via ports\n      channels[this._id].forEach(function (bc) {\n        if (bc === $this) return;\n        bc._mc.port2.postMessage(JSON.parse(value));\n      });\n    },\n    close: function () {\n      if (this._closed) return;\n      this._closed = true;\n      this._mc.port1.close();\n      this._mc.port2.close();\n\n      var index = channels[this._id].indexOf(this);\n      channels[this._id].splice(index, 1);\n    },\n\n    // EventTarget API\n    get onmessage() {\n      return this._mc.port1.onmessage;\n    },\n    set onmessage(value) {\n      this._mc.port1.onmessage = value;\n    },\n    addEventListener: function (type, listener /*, useCapture*/ ) {\n      return this._mc.port1.addEventListener.apply(this._mc.port1, arguments);\n    },\n    removeEventListener: function (type, listener /*, useCapture*/ ) {\n      return this._mc.port1.removeEventListener.apply(this._mc.port1, arguments);\n    },\n    dispatchEvent: function (event) {\n      return this._mc.port1.dispatchEvent.apply(this._mc.port1, arguments);\n    }\n  };\n\n  global.BroadcastChannel = global.BroadcastChannel || BroadcastChannel;\n}(self));\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfills/broadcastchannel.js\n **/"],"sourceRoot":""}