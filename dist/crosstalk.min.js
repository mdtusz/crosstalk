!function(t){function e(n){if(a[n])return a[n].exports;var s=a[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){"use strict";a(1);var n=function(t,e,a){if(void 0===t||""===t){var n=new Error("channel required (at minimum)");return void console.error(n)}"string"==typeof t&&(a=e,e=t,t={});var s=this,r=new BroadcastChannel(e);return Object.defineProperties(s,{_broadcastChannel:{writable:!1,enumerable:!1,configurable:!1,value:r},_handler:{writable:!0,enumerable:!1,configurable:!1,value:a||function(){}},_data:{writable:!0,enumerable:!1,configurable:!1,value:t},_instance:{writable:!0,enumerable:!1,configurable:!1,value:0}}),s._broadcastChannel.onmessage=function(t){switch(t.data.type){case"requestSync":s._broadcastChannel.postMessage({type:"pushSync",data:s._data});break;case"pushSync":s._data=t.data.data,s._handler(s._data);break;case"requestInit":s._broadcastChannel.postMessage({type:"pushInit",data:{data:s._data,instance:s._instance+1}});break;case"pushInit":s._instance=Math.max(s._instance,t.data.data.instance),s._data=t.data.data.data,s._handler(s._data)}},s._broadcastChannel.postMessage({type:"requestInit"}),s};n.prototype.set=function(t,e){return"string"==typeof t?(this._data[t]=e,this.sync(this._data),this._handler(this._data),this._data[t]):"object"==typeof t?(this._data=t,this.sync(this._data),this._handler(this.data),this._data):void 0},n.prototype.get=function(t){return"string"==typeof t?this._data[t]:this._data},n.prototype.sync=function(t){void 0===t?this._broadcastChannel.postMessage({type:"requestSync"}):this._broadcastChannel.postMessage({type:"pushSync",data:this._data})},n.prototype.setHandler=function(t){this._handler=t||function(){}},n.prototype.getInstance=function(){return this._instance},n.prototype.getChannel=function(){return this._broadcastChannel._name},window.CrossTalk=n},function(t,e){"use strict";!function(t){function e(e){var n=this;e=String(e);var s="$BroadcastChannel$"+e+"$";a[s]=a[s]||[],a[s].push(this),this._name=e,this._id=s,this._closed=!1,this._mc=new MessageChannel,this._mc.port1.start(),this._mc.port2.start(),t.addEventListener("storage",function(e){if(e.storageArea===t.localStorage&&null!==e.newValue&&e.key.substring(0,s.length)===s){var a=JSON.parse(e.newValue);n._mc.port2.postMessage(a)}})}var a=[];e.prototype=Object.defineProperties({postMessage:function(e){var n=this;if(this._closed){var s=new Error;throw s.name="InvalidStateError",s}var r=JSON.stringify(e),i=this._id+String(Date.now())+"$"+String(Math.random());t.localStorage.setItem(i,r),setTimeout(function(){t.localStorage.removeItem(i)},500),a[this._id].forEach(function(t){t!==n&&t._mc.port2.postMessage(JSON.parse(r))})},close:function(){if(!this._closed){this._closed=!0,this._mc.port1.close(),this._mc.port2.close();var t=a[this._id].indexOf(this);a[this._id].splice(t,1)}},addEventListener:function(t,e){return this._mc.port1.addEventListener.apply(this._mc.port1,arguments)},removeEventListener:function(t,e){return this._mc.port1.removeEventListener.apply(this._mc.port1,arguments)},dispatchEvent:function(t){return this._mc.port1.dispatchEvent.apply(this._mc.port1,arguments)}},{name:{get:function(){return this._name},configurable:!0,enumerable:!0},onmessage:{get:function(){return this._mc.port1.onmessage},set:function(t){this._mc.port1.onmessage=t},configurable:!0,enumerable:!0}}),t.BroadcastChannel=t.BroadcastChannel||e}(self)}]);